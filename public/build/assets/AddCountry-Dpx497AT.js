import{a as _,k as i,B as b,r as d,l as x,d as v,e as g,f as e,p as y,t as l,h,x as w,y as k,g as C,A as V}from"./app-C4nfOcqx.js";import{a as E}from"./countriesStore-DlzkWG2V.js";import{_ as M}from"./Popup-BAEILLfG.js";const U={class:"flex justify-center mt-12 text-blue-950"},B={class:"flex flex-col justify-center items-center bg-[#c4dff6] rounded-xl p-3 mt-28 border-2 border-sky-400 max-w-2xl w-full"},N={class:"flex flex-wraptext-gray-700 mt-2 self-start px-3"},S=e("i",{class:"fas fa-info-circle",style:{"margin-right":"0.5rem"}},null,-1),$=e("hr",{class:"border-t border-white w-full my-4 px-3"},null,-1),j={class:"mb-4"},I={for:"country",class:"block text-sm font-medium mb-1"},T={class:"px-4 py-2 bg-[#77b6ea] rounded-md hover:bg-sky-500 self-end",type:"submit"},A=e("i",{class:"fas fa-save",style:{"margin-right":"0.5rem"}},null,-1),z={__name:"AddCountry",setup(D){const{t:u}=_(),c=E(),f=i(()=>c.countries),r=b({country:""}),s=d(!1),a=d(null),m=i(()=>{switch(a.value){case"emptyInput":return u("please_select_a_country");case"countryExists":return u("country_already_exists");case"country_added_successfully":return u("country_added_successfully");case"error":return u("error_submitting_form");default:return""}}),p=async()=>{if(!r.country){a.value="emptyInput",s.value=!0;return}const o=r.country.toUpperCase();if(f.value.some(t=>t.country.toUpperCase()===o))a.value="countryExists",s.value=!0;else try{const t=await V.post("/api/add-country",{country:o});a.value="country_added_successfully",s.value=!0,r.country="",c.addCountry(t.data),c.broadcastUpdate(t.data)}catch(t){console.error("Υπήρξε ένα σφάλμα στην αποστολή της φόρμας",t),a.value="error",s.value=!0}};return x(async()=>{await c.fetchCountries()}),(o,n)=>(v(),g("div",U,[e("div",B,[e("div",N,[e("div",null,[S,y(l(o.$t("add_country_form_add_country")),1)])]),e("form",{onSubmit:h(p,["prevent"]),class:"flex flex-col justify-center gap-3 w-full px-3"},[$,e("div",j,[e("label",I,l(o.$t("add_country_form_country_name")),1),w(e("input",{id:"country","onUpdate:modelValue":n[0]||(n[0]=t=>r.country=t),type:"text",class:"mt-1 block w-full py-2 px-3 text-blue-950 border border-sky-400 bg-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500"},null,512),[[k,r.country]])]),e("button",T,[A,y(" "+l(o.$t("save")),1)])],32)]),C(M,{message:m.value,isVisible:s.value,"onUpdate:isVisible":n[1]||(n[1]=t=>s.value=t)},null,8,["message","isVisible"])]))}};export{z as default};
