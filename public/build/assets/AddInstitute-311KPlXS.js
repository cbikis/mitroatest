import{a as h,k as f,B as k,r as m,l as v,d as w,e as V,f as e,p,t as n,h as I,g as b,x as l,y as a,C as U,A as $}from"./app-C4nfOcqx.js";import{u as C,a as S}from"./countriesStore-DlzkWG2V.js";import{_ as M}from"./Popup-BAEILLfG.js";import{C as E}from"./CustomDropdown-iE1I-pk4.js";const A={class:"flex justify-center mt-12 text-blue-950"},B={class:"flex flex-col justify-center items-center bg-[#c4dff6] rounded-xl p-3 mt-28 border-2 border-sky-400 max-w-2xl w-full"},F={class:"flex flex-wraptext-gray-700 mt-2 self-start px-3"},N=e("i",{class:"fas fa-info-circle",style:{"margin-right":"0.5rem"}},null,-1),j=e("hr",{class:"border-t border-white w-full my-4 px-3"},null,-1),z={class:"mb-4"},D={for:"country_id",class:"block text-sm font-medium mb-1"},T={class:"mb-4"},R={for:"institute",class:"block text-sm font-medium"},P={class:"mb-4 w-full"},q={for:"institute_original",class:"block text-sm font-medium"},G={class:"mb-4 w-full"},H={for:"institute_el",class:"block text-sm font-medium"},J={class:"mb-4 w-full"},K={for:"institute_old_1",class:"block text-sm font-medium"},L={class:"mb-4 w-full"},O={for:"institute_old_2",class:"block text-sm font-medium"},Q={class:"mb-4 w-full"},W={for:"url",class:"block text-sm font-medium"},X={class:"mb-4"},Y={for:"info",class:"block text-sm font-medium"},Z={class:"mb-6 self-center"},tt={for:"franchise",class:"flex items-center"},et={class:"ml-2 text-sm"},st={class:"px-4 py-2 bg-[#77b6ea] rounded-md hover:bg-sky-500 self-end",type:"submit"},it=e("i",{class:"fas fa-save",style:{"margin-right":"0.5rem"}},null,-1),dt={__name:"AddInstitute",setup(ot){const{t:r}=h(),c=C(),_=S(),y=f(()=>_.countries),t=k({country_id:"",institute:"",url:"",institute_original:"",institute_el:"",institute_old_1:"",institute_old_2:"",info:"",franchise:!1}),u=m(!1),d=m(null),g=f(()=>{switch(d.value){case"emptyInput":return r("please_select_country_and_institute");case"emptyCountryInput":return r("please_select_a_country");case"emptyInstituteInput":return r("please_input_institite_name");case"instituteExistsFranchise":return r("institute_already_exists_in_franchise_list");case"instituteExistsRecognized":return r("institute_already_exists_recognized");case"instituteAddedSuccessfully":return r("institute_added_successfully");case"error":return r("error_submitting_form");default:return""}});v(async()=>{await _.fetchCountries(),await c.fetchInstitutes()});const x=async()=>{if(!t.country_id&&!t.institute){d.value="emptyInput",u.value=!0;return}else if(t.country_id){if(!t.institute){d.value="emptyInstituteInput",u.value=!0;return}}else{d.value="emptyCountryInput",u.value=!0;return}const o=t.institute.toUpperCase();if(c.institutes.find(s=>s.country_id===t.country_id&&s.institute.toUpperCase()===o&&s.franchise==t.franchise))d.value=t.franchise?"instituteExistsFranchise":"instituteExistsRecognized",u.value=!0;else try{const s=await $.post("/api/add-foreign-institute",t);d.value="instituteAddedSuccessfully",u.value=!0,t.country_id="",t.institute="",t.info="",t.franchise=!1,t.url="",t.institute_el="",t.institute_original="",t.institute_old_1="",t.institute_old_2="",console.log(s.data),c.addInstitute(s.data),c.broadcastUpdate(s.data)}catch(s){console.error("Υπήρξε ένα σφάλμα στην αποστολή της φόρμας",s),d.value="error",u.value=!0}};return(o,i)=>(w(),V("div",A,[e("div",B,[e("div",F,[e("div",null,[N,p(n(o.$t("add_institute_form_add_institute")),1)])]),e("form",{onSubmit:I(x,["prevent"]),class:"flex flex-col justify-center gap-3 w-full px-3"},[j,e("div",z,[e("label",D,n(o.$t("add_institute_form_country")),1),b(E,{id:"country_id",options:y.value,"option-value":"id","option-text":"country",modelValue:t.country_id,"onUpdate:modelValue":i[0]||(i[0]=s=>t.country_id=s),placeholder:o.$t("choose_country")},null,8,["options","modelValue","placeholder"])]),e("div",T,[e("label",R,n(o.$t("add_institute_form_institute")),1),l(e("input",{id:"institute","onUpdate:modelValue":i[1]||(i[1]=s=>t.institute=s),type:"text",class:"mt-1 block w-full py-2 px-3 text-blue-950 border border-sky-400 bg-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500"},null,512),[[a,t.institute]])]),e("div",P,[e("label",q,n(o.$t("add_institute_form_institute_original")),1),l(e("input",{id:"institute_original","onUpdate:modelValue":i[2]||(i[2]=s=>t.institute_original=s),type:"text",class:"mt-1 block w-full py-2 px-3 text-blue-950 border border-sky-400 bg-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky -500"},null,512),[[a,t.institute_original]])]),e("div",G,[e("label",H,n(o.$t("add_institute_form_institute_el")),1),l(e("input",{id:"institute_el","onUpdate:modelValue":i[3]||(i[3]=s=>t.institute_el=s),type:"text",class:"mt-1 block w-full py-2 px-3 text-blue-950 border border-sky-400 bg-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky -500"},null,512),[[a,t.institute_el]])]),e("div",J,[e("label",K,n(o.$t("add_institute_form_institute_old_institute_1")),1),l(e("input",{id:"institute_old_1","onUpdate:modelValue":i[4]||(i[4]=s=>t.institute_old_1=s),type:"text",class:"mt-1 block w-full py-2 px-3 text-blue-950 border border-sky-400 bg-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky -500"},null,512),[[a,t.institute_old_1]])]),e("div",L,[e("label",O,n(o.$t("add_institute_form_institute_old_institute_2")),1),l(e("input",{id:"institute_old_2","onUpdate:modelValue":i[5]||(i[5]=s=>t.institute_old_2=s),type:"text",class:"mt-1 block w-full py-2 px-3 text-blue-950 border border-sky-400 bg-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky -500"},null,512),[[a,t.institute_old_2]])]),e("div",Q,[e("label",W,n(o.$t("add_institute_form_institute_url")),1),l(e("input",{id:"url","onUpdate:modelValue":i[6]||(i[6]=s=>t.url=s),type:"text",class:"mt-1 block w-full py-2 px-3 text-blue-950 border border-sky-400 bg-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky -500"},null,512),[[a,t.url]])]),e("div",X,[e("label",Y,n(o.$t("add_institute_form_information")),1),l(e("input",{id:"info","onUpdate:modelValue":i[7]||(i[7]=s=>t.info=s),type:"text",class:"mt-1 block w-full py-2 px-3 text-blue-950 border border-sky-400 bg-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500"},null,512),[[a,t.info]])]),e("div",Z,[e("label",tt,[l(e("input",{id:"franchise","onUpdate:modelValue":i[8]||(i[8]=s=>t.franchise=s),type:"checkbox",class:"h-4 w-4 text-blue-950 border-sky-400 rounded"},null,512),[[U,t.franchise]]),e("span",et,n(o.$t("add_institute_form_franchise")),1)])]),e("button",st,[it,p(" "+n(o.$t("save")),1)])],32)]),b(M,{message:g.value,isVisible:u.value,"onUpdate:isVisible":i[9]||(i[9]=s=>u.value=s)},null,8,["message","isVisible"])]))}};export{dt as default};
